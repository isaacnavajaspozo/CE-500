# 🧠 Zabbix es una herramienta de monitoreo integral y escalable para infraestructuras de TI, que ofrece visualización, alertas y gestión centralizada de servidores, redes y aplicaciones.
#=========================================================================================================================
[⛩️KIRIBAKO]::
Documentación ofical zabbix                 : https://www.zabbix.com/download?os_distribution=debian

#=========================================================================================================================
[⛩️INSTALACIONES]::
# instalaciones 
apt update
apt upgrade -y

# creo una carpeta en el contenedor e instalo el script
mkdir /KIRIBAKO && cd /KIRIBAKO
apt install vim -y
vim script-00.sh
# i - (shift + botón derecho):
--------------------------------------------------------------------------------------
    # código de /SCRIPTS/script-00.sh de este github
--------------------------------------------------------------------------------------

# doy permisos y hago la instalación
chmod +x script-00.sh
./script-00.sh
source ~/.bashrc

#=========================================================================================================================
[⛩️INSTALACIÓN ZABBIX]::
# instalaciones necesarias
apt install -y dpkg wget vim mariadb-server mariadb-client mysql-server

# instalar el repositorio de Zabbix
wget https://repo.zabbix.com/zabbix/7.2/release/debian/pool/main/z/zabbix-release/zabbix-release_latest_7.2+debian12_all.deb
dpkg -i zabbix-release_latest_7.2+debian12_all.deb
apt update

# instalar el servidor, la interfaz y el agente de Zabbix
apt install zabbix-server-mysql zabbix-frontend-php zabbix-apache-conf zabbix-sql-scripts zabbix-agent

# servicios
sudo systemctl start mariadb
sudo systemctl enable mariadb
sudo systemctl start mysql
sudo systemctl enable mysql

# crear la base de datos
mysql -uroot -p
> password
  > create database zabbix character set utf8mb4 collate utf8mb4_bin;
  > create user zabbix@localhost identified by 'password';
  > grant all privileges on zabbix.* to zabbix@localhost;
  > set global log_bin_trust_function_creators = 1;
  > quit;

# importo el esquema y los datos iniciales
zcat /usr/share/zabbix/sql-scripts/mysql/server.sql.gz | mysql --default-character-set=utf8mb4 -uzabbix -p zabbix
> password

# deshabilite la opción log_bin_trust_function_creators después de importar el esquema de la base de datos
mysql -uroot -p
> password
  > set global log_bin_trust_function_creators = 0;
  > quit;

# configurar la base de datos para el servidor Zabbix
vim /etc/zabbix/zabbix_server.conf
--------------------------------------------------------------------------------------
...
DBPassword=password
...
--------------------------------------------------------------------------------------

# iniciar los procesos del servidor 
systemctl restart zabbix-server zabbix-agent apache2
systemctl enable zabbix-server zabbix-agent apache2

#=========================================================================================================================
[⛩️INTERFACE WEB]::
# busco la web desde http
# http://<IP_HOST_VM-ZABBIX>/zabbix
http://192.168.1.76/zabbix

# configuración desde la interface web
> Tipo de base de datos : MySQL
> Servidor de base de dato : localhost
> Puerto de la base de datos : 3306
> Nombre de la base de datos : zabbix
> Usuario : zabbix
> Contraseña : password

> Nombre del servidor Zabbix: Zabbix
> Zona horaria: (UTC+02:00) Europe/Madrid
> Tema por defecto: Azul

# para entrar a la interface por defecto las credenciales son las siguientes
Usuario: Admin
Contraseña: zabbix

# Lo siguiente que voy hacer es monitorizar los pc que tengo en mi red::
# me dirijo a la siguiente pagina y me descargo el agente en el pc que quiero monitorizar 
https://www.zabbix.com/download_agents
    > Windows
    > Any
    > amd64
    > 7.2
    > OpenSSL
    > MSI
    > v7.2.5
DOWNLOAD

# ejecutop el instalador del agente desde el pc 
    > Host Name                            : PC-personal
    > Zabbix server ip/dns                 : <IP_DEL_SERVIDOR_ZABBIX>
    > Server or proxy for active checks    : <IP_DEL_SERVIDOR_ZABBIX>

# me dirijo al siguiente archivo y compruebo los siguientes datos ya que tienen que coindicir del lado de la configuración web, en mi caso son los siguientes:
C:\Program Files\Zabbix Agent\zabbix_agentd.conf
    > Server=192.168.1.76
    > Hostname=WIN-PLFA3OEH6IF

# Me dirijo a la web
http://192.168.1.76/zabbix
    > Recopilación de datos
        > Equipos
        > Crear Equipo
            + Nombre de equipo      : PC-personal
            + Nombre visible        : PC-personal
            + Plantillas            : Windows by Zabbix agent
            + Grupos de equipos     : Applications
            + Interfaces   -  Agent : <IP_DEL_PC>

# si me da un error de disponivilidad puede ser porque no le deja acceso desde el firewall
# creo una regla desde Windows Firewall para permitir el paso
Panle de control > Windows firewall > Configuración avanzada
# creo dos reglas: una regla de entrada y otra regla de salida
    + Puerto
    + TCP - Puerto: 10050, 10051
    + Permitir conexión
    + Dominio, Privado, Público
    + Regla (entrada/salida) para agente zabbix
