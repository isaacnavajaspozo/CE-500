#=========================================================================================================================
[â›©ï¸WHITE WHALE]::
# Guia de instalaciÃ³n debian       : https://docs.docker.com/engine/install/debian/
# GuÃ­a de instalaciÃ³n volumenes    : https://docs.docker.com/storage/volumes/

#=========================================================================================================================
[â›©ï¸RESUMEN PROYECTO Â· MÃQUINAS LABORATORÃO]:
# ğŸ§‘â€ğŸ“ Dentro de un servidor Debian, voy a crear unas mÃ¡quinas virtuales con LXC (Linux Containers). Ya que lo que quiero es crear mÃ¡quinas independientes con distintos servicios.
# ğŸ§‘â€ğŸ“ Voy a crear un script para hacer mÃ¡s sencillo la utilizaciÃ³n e instalaciÃ³n de LXC

#=========================================================================================================================
[â›©ï¸MANUAL DE FUNCIONAMIENTO LXC]:
# ğŸ§‘â€ğŸ“ Este paso lo dejo para conocer los comandos que voy hacer por debajo pero lo quiero qutomatizar con el script del siguiente apartado
# ğŸ“¦ InstalaciÃ³n en Debian
sudo apt update
sudo apt install lxc lxc-templates bridge-utils

# ğŸ§± Crear un contenedor Debian
sudo lxc-create -n vm-samba -t debian

# ğŸ”Œ Iniciar el contenedor (segundo plano) : esto es para que aunque salga con "exit" seguirÃ¡ encendido
sudo lxc-start -n vm-samba -d

# ğŸ—ï¸ Comprobar que estÃ¡ en ejecuciÃ³n
sudo lxc-info -n vm-samba
# ğŸ«¸ Detener el contenedor
sudo lxc-stop -n vm-samba
# ğŸ“„ Listar 
lxc-ls --fancy

# ğŸ“² Acceder al contenedor
sudo lxc-attach -n vm-samba

#=========================================================================================================================
[â›©ï¸INSTALACIÃ“N DE SCRIPT]:
# creo carpeta en servidor principal
cd /
mkdir KIRIBAKO

# creo script
vim lxc-manager.sh
---------------------------------------------------------------------------------
#!/bin/bash

# Mostrar estado actual de los contenedores
echo "Estado actual de los contenedores:"
lxc-ls --fancy
echo ""

# Mostrar menÃº de opciones
echo "Â¿QuÃ© deseas hacer?"
echo "1) Crear una nueva mÃ¡quina (debian)"
echo "2) Iniciar una mÃ¡quina en segundo plano"
echo "3) Acceder a una mÃ¡quina"
echo "4) Parar una mÃ¡quina"
read -p "Elige una opciÃ³n [1-4]: " opcion

case $opcion in
    1)
        read -p "Introduce el nombre de la nueva mÃ¡quina: " nombre
        sudo lxc-create -n "$nombre" -t debian
        ;;
    2)
        read -p "Introduce el nombre de la mÃ¡quina a iniciar: " nombre
        sudo lxc-start -n "$nombre" -d
        ;;
    3)
        read -p "Introduce el nombre de la mÃ¡quina a la que quieres acceder: " nombre
        sudo lxc-attach -n "$nombre"
        ;;
    4)
        read -p "Introduce el nombre de la mÃ¡quina que deseas parar: " nombre
        sudo lxc-stop -n "$nombre"
        ;;
    *)
        echo "OpciÃ³n no vÃ¡lida."
        ;;
esac
---------------------------------------------------------------------------------

# doy permisos 
chmod +x lxc-managers.sh

# ejecuto el script
./lxc-manager.sh

# ğŸ§‘â€ğŸ“ Llegados a este punto lo Ãºnico que tengo que hacer es: 
#       1Âº Crear la mÃ¡quina
#       2Âº Inicializar la mÃ¡quina en segundo plano si no podrÃ© acceder a ella
#       3Âº Acceder a ella 
